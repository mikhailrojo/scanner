<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<meta charset=utf-8 />
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<title>Радар</title>
</head>
<body>


  <div id="svg" style:""></div>



<script>
var socket = io.connect("http://localhost:3000");
var x = 0;
var y = 0;
var width = 250;
d3.select("#svg")
    .append("svg")
    .attr("id", "mainSvg")
    .style("width", width)
    .style("height", 500)
    .style("background-color", "purple")


socket.on("message", function(data){
    //console.log(data);
    var digit = parseInt(data);
    d3.select("#mainSvg")
    //.select("rect")
    .append("rect")
        .attr("fill", "black")
        .attr("width", 10)
        .attr("height", 3)
        .attr("x", x)
        .attr("y", digit)
        .style("fill", "yellow")
        .style("opacity", 1)
        .transition()
        .duration(5000)
        .style("opacity", 0)
        .remove()
    x+= 5;
    if(x > width){x = 0}

})


</script>

</body>
</html>
